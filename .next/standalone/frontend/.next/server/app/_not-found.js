(()=>{var t={};t.id=9165,t.ids=[9165],t.modules={47849:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external")},72934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external")},54580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},56853:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>l,pages:()=>u,routeModule:()=>m,tree:()=>d});var a=r(7),s=r(8533),i=r(29377),n=r.n(i),o=r(29799),c={};for(let t in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(c[t]=()=>o[t]);r.d(e,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,95667)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],u=[],l="/_not-found",h={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},31596:(t,e,r)=>{Promise.resolve().then(r.bind(r,41175))},67223:(t,e,r)=>{Promise.resolve().then(r.t.bind(r,45483,23)),Promise.resolve().then(r.t.bind(r,46544,23)),Promise.resolve().then(r.t.bind(r,17680,23)),Promise.resolve().then(r.t.bind(r,24138,23)),Promise.resolve().then(r.t.bind(r,38705,23)),Promise.resolve().then(r.t.bind(r,57974,23))},41175:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Providers:()=>c});var a=r(54714),s=r(99825),i=r(50774),n=r(77580),o=r(87548);function c({children:t}){let[e]=(0,n.useState)(()=>new s.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}})),r=(0,o.x)(t=>t.fetchCart);return(0,n.useEffect)(()=>{r()},[r]),a.jsx(i.aH,{client:e,children:t})}},87299:(t,e,r)=>{"use strict";r.d(e,{KQ:()=>i,ZP:()=>l,hi:()=>u});var a=r(84825);let s="http://192.168.0.8:4000/api",i="cart_id";class n extends Error{constructor(t,e,r){super(e),this.status=t,this.errors=r,this.name="ApiError"}}async function o(t){let e=await t.json();if(!t.ok)throw new n(t.status,e.message||"An error occurred",e.errors);return e}function c(){return a.Z.get(i)}function d(t=!0){let e={"Content-Type":"application/json"};if(t){let t=c();t&&(e["X-Cart-Id"]=t)}return e}let u={async getProducts(t){let e=new URLSearchParams;return t&&Object.entries(t).forEach(([t,r])=>{void 0!==r&&e.append(t,String(r))}),o(await fetch(`${s}/products?${e.toString()}`,{headers:d(!1)}))},getProduct:async t=>o(await fetch(`${s}/products/${t}`,{headers:d(!1)})),getFeaturedProducts:async()=>o(await fetch(`${s}/products/featured`,{headers:d(!1)})),getCategories:async()=>o(await fetch(`${s}/categories`,{headers:d(!1)})),getCategoryTree:async()=>o(await fetch(`${s}/categories/tree`,{headers:d(!1)})),async createCart(){let t=await fetch(`${s}/cart`,{method:"POST",headers:d(!1)}),e=await o(t);if(e.data?.cartId){var r;r=e.data.cartId,a.Z.set(i,r,{expires:365})}return e},async getCart(){let t=c();if(!t)return{success:!0,data:{items:[],subtotal:0,itemCount:0}};try{let e=await fetch(`${s}/cart/${t}`,{headers:d()});return await o(e)}catch(t){if(t instanceof n&&404===t.status)return a.Z.remove(i),{success:!0,data:{items:[],subtotal:0,itemCount:0}};throw t}},async addToCart(t,e=1){let r=c();if(!r){let t=await this.createCart();r=t.data?.cartId}try{let a=await fetch(`${s}/cart/${r}/items`,{method:"POST",headers:d(),body:JSON.stringify({productId:t,quantity:e})});return await o(a)}catch(c){if(c instanceof n&&404===c.status){a.Z.remove(i);let n=await this.createCart();return r=n.data?.cartId,o(await fetch(`${s}/cart/${r}/items`,{method:"POST",headers:d(),body:JSON.stringify({productId:t,quantity:e})}))}throw c}},async updateCartItem(t,e){let r=c();if(!r)throw new n(400,"No cart found");return o(await fetch(`${s}/cart/${r}/items/${t}`,{method:"PUT",headers:d(),body:JSON.stringify({quantity:e})}))},async removeFromCart(t){let e=c();if(!e)throw new n(400,"No cart found");return o(await fetch(`${s}/cart/${e}/items/${t}`,{method:"DELETE",headers:d()}))},async clearCart(){let t=c();return t?o(await fetch(`${s}/cart/${t}/items`,{method:"DELETE",headers:d()})):{success:!0,data:null}},async checkout(t){let e=await fetch(`${s}/orders/checkout`,{method:"POST",headers:d(),body:JSON.stringify(t)}),r=await o(e);return r.success&&a.Z.remove(i),r},trackOrder:async t=>o(await fetch(`${s}/orders/track/${t}`,{headers:d(!1)})),initiatePayment:async(t,e)=>o(await fetch(`${s}/payments/initiate`,{method:"POST",headers:d(!1),body:JSON.stringify({orderId:t,phoneNumber:e})})),checkPaymentStatus:async t=>o(await fetch(`${s}/payments/${t}/status`,{headers:d(!1)}))},l=u},11033:(t,e,r)=>{"use strict";r.d(e,{KQ:()=>a.KQ,hi:()=>a.ZP});var a=r(87299)},87548:(t,e,r)=>{"use strict";r.d(e,{x:()=>i});var a=r(11914),s=r(11033);let i=(0,a.Ue)()((t,e)=>({items:[],subtotal:0,itemCount:0,isLoading:!1,isOpen:!1,fetchCart:async()=>{t({isLoading:!0});try{let e=await s.hi.getCart();if(e.success){let r=e.data;t({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0})}}catch(t){console.error("Failed to fetch cart:",t)}finally{t({isLoading:!1})}},addItem:async(r,a=1)=>{t({isLoading:!0});try{let i=await s.hi.addToCart(r,a);if(i.success){let r=i.data;t({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0}),e().openCart()}}catch(t){throw console.error("Failed to add item:",t),t}finally{t({isLoading:!1})}},updateQuantity:async(r,a)=>{if(a<1)return e().removeItem(r);t({isLoading:!0});try{let e=await s.hi.updateCartItem(r,a);if(e.success){let r=e.data;t({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0})}}catch(t){throw console.error("Failed to update quantity:",t),t}finally{t({isLoading:!1})}},removeItem:async e=>{t({isLoading:!0});try{let r=await s.hi.removeFromCart(e);if(r.success){let e=r.data;t({items:e.items||[],subtotal:e.subtotal||0,itemCount:e.itemCount||0})}}catch(t){throw console.error("Failed to remove item:",t),t}finally{t({isLoading:!1})}},clearCart:async()=>{t({isLoading:!0});try{await s.hi.clearCart(),t({items:[],subtotal:0,itemCount:0})}catch(t){throw console.error("Failed to clear cart:",t),t}finally{t({isLoading:!1})}},toggleCart:()=>t(t=>({isOpen:!t.isOpen})),openCart:()=>t({isOpen:!0}),closeCart:()=>t({isOpen:!1})}))},95667:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h,metadata:()=>l});var a=r(40657),s=r(30827),i=r.n(s);r(91641);var n=r(71481);let o=(0,n.createProxy)(String.raw`/home/wilsonjunior/ecommerce-app/frontend/src/app/providers.tsx`),{__esModule:c,$$typeof:d}=o;o.default;let u=(0,n.createProxy)(String.raw`/home/wilsonjunior/ecommerce-app/frontend/src/app/providers.tsx#Providers`),l={title:"Shop - Your E-Commerce Store",description:"Quality products at great prices"};function h({children:t}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{className:i().variable,children:a.jsx(u,{children:t})})})}},91641:()=>{}};var e=require("../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[3499,6075],()=>r(56853));module.exports=a})();
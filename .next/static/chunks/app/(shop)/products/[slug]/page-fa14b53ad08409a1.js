(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7966],{7014:function(e,t,r){Promise.resolve().then(r.bind(r,8363))},8363:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var s=r(7821),a=r(8900),n=r(346),i=r(8078),c=r(2904),l=r(222),o=r(2547),d=r(3932),u=r(979),m=r(4405),h=r(4477),x=r(7070),g=r(615),f=r(3402),p=r(1233),v=r(8625),b=r(3573),j=r(2066),N=r(8380),y=r(3544),w=r(6786),C=r(2154),k=r(3572),O=r(8047),P=r(4888),Z=r(8350),F=r(3197),S=r(5659),E=r(3232);function I(e){var t,r,Z;let{params:I}=e,[T,L]=(0,i.useState)(1),[z,A]=(0,i.useState)(0),[R,_]=(0,i.useState)(!1),[q,U]=(0,i.useState)(!1),[J,K]=(0,i.useState)(!1),M=(0,E.x)(e=>e.addItem),{data:Q,isLoading:X,error:G}=(0,a.a)({queryKey:["product",I.slug],queryFn:async()=>await C.hi.getProduct(I.slug)}),V=(null==Q?void 0:Q.data)||null,B=async()=>{if(V&&!R){_(!0);try{await M(V.id,T),U(!0),setTimeout(()=>U(!1),2e3)}catch(e){console.error("Failed to add to cart:",e)}finally{_(!1)}}};if(X)return(0,s.jsx)(D,{});if(G||!V)return(0,s.jsx)("div",{className:"min-h-[60vh] flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-muted mx-auto flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Product not found"}),(0,s.jsx)("p",{className:"text-muted-foreground max-w-md",children:"The product you're looking for doesn't exist or has been removed."}),(0,s.jsx)(k.z,{asChild:!0,className:"mt-4 rounded-full",children:(0,s.jsxs)(n.default,{href:"/",children:[(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Back to Shop"]})})]})});let W=V.images.length>0?V.images:[{url:"/placeholder-product.png",isPrimary:!0,id:"0",publicId:"",sortOrder:0}],H=V.stock<=0,$=V.comparePrice&&Number(V.comparePrice)>Number(V.price),Y=$?Math.round((1-Number(V.price)/Number(V.comparePrice))*100):0,ee=V.specifications.reduce((e,t)=>{let r=t.group||"General";return e[r]||(e[r]=[]),e[r].push(t),e},{});return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:(0,s.jsxs)("div",{className:"container py-6 lg:py-10",children:[(0,s.jsxs)("nav",{className:"mb-6 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(n.default,{href:"/",className:"hover:text-primary transition-colors",children:"Home"}),(0,s.jsx)(o.Z,{className:"h-4 w-4"}),V.categories.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:(null===(r=V.categories[0])||void 0===r?void 0:null===(t=r.category)||void 0===t?void 0:t.name)||"Products"}),(0,s.jsx)(o.Z,{className:"h-4 w-4"})]}),(0,s.jsx)("span",{className:"text-foreground font-medium truncate max-w-[200px]",children:V.name})]}),(0,s.jsxs)("div",{className:"grid gap-8 lg:gap-12 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative aspect-square overflow-hidden rounded-2xl bg-gradient-to-br from-muted/50 to-muted border shadow-lg",children:[(0,s.jsx)(F.q,{src:(null===(Z=W[z])||void 0===Z?void 0:Z.url)||"/placeholder-product.png",alt:V.name,fill:!0,className:"object-cover transition-transform duration-500",priority:!0}),(0,s.jsxs)("div",{className:"absolute left-4 top-4 flex flex-col gap-2",children:[$&&(0,s.jsxs)(O.C,{className:"bg-red-500 text-white border-0 px-3 py-1 text-sm font-bold shadow-lg",children:["-",Y,"%"]}),V.featured&&(0,s.jsxs)(O.C,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 px-3 py-1 shadow-lg",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3 mr-1 fill-white"}),"Featured"]}),V.isPreorder&&(0,s.jsxs)(O.C,{className:"bg-orange-500 text-white border-0 px-3 py-1 shadow-lg",children:[(0,s.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Pre-order"]})]}),W.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{if(V){let e=V.images.length>0?V.images:[{url:"/placeholder-product.png",isPrimary:!0,id:"0",publicId:"",sortOrder:0}];A(t=>(t-1+e.length)%e.length)}},className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-all hover:scale-110",children:(0,s.jsx)(l.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>{if(V){let e=V.images.length>0?V.images:[{url:"/placeholder-product.png",isPrimary:!0,id:"0",publicId:"",sortOrder:0}];A(t=>(t+1)%e.length)}},className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-all hover:scale-110",children:(0,s.jsx)(o.Z,{className:"h-5 w-5"})})]}),H&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,s.jsx)(O.C,{variant:"destructive",className:"text-lg px-6 py-2",children:"Out of Stock"})}),(0,s.jsxs)("div",{className:"absolute right-4 top-4 flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>K(!J),className:(0,S.cn)("w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all hover:scale-110",J?"bg-red-500 text-white":"bg-white/90 backdrop-blur-sm hover:bg-white"),children:(0,s.jsx)(m.Z,{className:(0,S.cn)("h-5 w-5",J&&"fill-white")})}),(0,s.jsx)("button",{className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-all hover:scale-110",children:(0,s.jsx)(h.Z,{className:"h-5 w-5"})})]})]}),W.length>1&&(0,s.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:W.map((e,t)=>(0,s.jsx)("button",{onClick:()=>A(t),className:(0,S.cn)("relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-xl border-2 transition-all duration-200",z===t?"border-primary ring-2 ring-primary/20 scale-105":"border-transparent hover:border-muted-foreground/30"),children:(0,s.jsx)(F.q,{src:e.url,alt:"".concat(V.name," ").concat(t+1),fill:!0,className:"object-cover"})},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[V.categories.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:V.categories.map(e=>{var t;return(0,s.jsx)(O.C,{variant:"secondary",className:"rounded-full px-3",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"Category"},e.id)})}),(0,s.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold leading-tight",children:V.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(d.Z,{className:(0,S.cn)("h-5 w-5",t<4?"text-amber-400 fill-amber-400":"text-muted-foreground/30")},t))}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"(4.0) • 12 reviews"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-3",children:[(0,s.jsx)("span",{className:"text-4xl font-bold text-primary",children:(0,S.T4)(V.price)}),$&&(0,s.jsx)("span",{className:"text-xl text-muted-foreground line-through",children:(0,S.T4)(V.comparePrice)}),$&&(0,s.jsxs)(O.C,{className:"bg-red-100 text-red-600 border-0",children:["Save ",(0,S.T4)(Number(V.comparePrice)-Number(V.price))]})]}),V.isPreorder&&V.preorderNote&&(0,s.jsx)("div",{className:"rounded-xl bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950 dark:to-amber-950 p-4 border border-orange-200 dark:border-orange-800",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-orange-500 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-orange-800 dark:text-orange-200",children:"Pre-order Item"}),(0,s.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:V.preorderNote})]})]})}),V.description&&(0,s.jsx)("p",{className:"text-muted-foreground leading-relaxed text-lg",children:V.description}),(0,s.jsx)(P.Z,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)("span",{className:"font-medium",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-muted rounded-full p-1",children:[(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",onClick:()=>L(Math.max(1,T-1)),disabled:T<=1,children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"w-12 text-center text-lg font-semibold",children:T}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10",onClick:()=>L(Math.min(V.stock,T+1)),disabled:T>=V.stock,children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 inline mr-1"}),V.stock," in stock"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(k.z,{className:"flex-1 h-14 text-lg rounded-xl shadow-lg shadow-primary/25 hover:shadow-primary/40 transition-all",size:"lg",onClick:B,disabled:H||R,children:q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"mr-2 h-5 w-5"}),"Added to Cart!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"mr-2 h-5 w-5"}),R?"Adding...":"Add to Cart"]})}),(0,s.jsx)(k.z,{variant:"outline",size:"lg",className:"h-14 px-6 rounded-xl",onClick:()=>K(!J),children:(0,s.jsx)(m.Z,{className:(0,S.cn)("h-5 w-5",J&&"fill-red-500 text-red-500")})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/50",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(v.Z,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Secure Payment"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"100% protected"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/50",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(b.Z,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Easy Returns"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"7-day policy"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/50",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(j.Z,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"Multiple Payment"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Various options"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-muted/50",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(N.Z,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:"24/7 Support"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dedicated help"})]})]})]}),V.deliveryZones&&V.deliveryZones.length>0&&(0,s.jsxs)("div",{className:"space-y-3 rounded-xl border bg-gradient-to-br from-background to-muted/30 p-5 shadow-sm",children:[(0,s.jsxs)("h3",{className:"flex items-center gap-2 font-semibold text-lg",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 text-primary"}),"Delivery Information"]}),(0,s.jsx)("div",{className:"space-y-2",children:V.deliveryZones.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg bg-muted/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:e.zoneName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.minDays===e.maxDays?"".concat(e.minDays," day").concat(e.minDays>1?"s":""):"".concat(e.minDays,"-").concat(e.maxDays," days")}),void 0!==e.deliveryFee&&null!==e.deliveryFee&&e.deliveryFee>0?(0,s.jsxs)(O.C,{variant:"secondary",className:"rounded-full",children:["+",(0,S.T4)(e.deliveryFee)]}):(0,s.jsx)(O.C,{className:"bg-green-100 text-green-700 border-0 rounded-full",children:"Free"})]})]},t))})]})]})]}),Object.keys(ee).length>0&&(0,s.jsxs)("div",{className:"mt-12 lg:mt-16",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl lg:text-3xl font-bold",children:"Product Specifications"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Detailed information about this product"})]}),(0,s.jsx)("div",{className:"rounded-2xl border bg-gradient-to-br from-background to-muted/20 p-6 lg:p-8 shadow-sm",children:(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:Object.entries(ee).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[Object.keys(ee).length>1&&(0,s.jsx)("h3",{className:"font-semibold text-lg border-b pb-2 mb-3",children:t}),(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("div",{className:"flex justify-between py-2 px-3 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e.key}),(0,s.jsx)("span",{className:"font-medium",children:e.value})]},e.id))})]},t)})})})]})]})})}function D(){return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:(0,s.jsxs)("div",{className:"container py-6 lg:py-10",children:[(0,s.jsx)(Z.O,{className:"mb-6 h-5 w-48"}),(0,s.jsxs)("div",{className:"grid gap-8 lg:gap-12 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(Z.O,{className:"aspect-square rounded-2xl"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(Z.O,{className:"h-20 w-20 rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-20 w-20 rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-20 w-20 rounded-xl"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(Z.O,{className:"h-6 w-24 rounded-full"}),(0,s.jsx)(Z.O,{className:"h-10 w-3/4"}),(0,s.jsx)(Z.O,{className:"h-5 w-32"}),(0,s.jsx)(Z.O,{className:"h-12 w-48"}),(0,s.jsx)(Z.O,{className:"h-24 w-full rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-14 w-full rounded-xl"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(Z.O,{className:"h-20 rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-20 rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-20 rounded-xl"}),(0,s.jsx)(Z.O,{className:"h-20 rounded-xl"})]})]})]})]})})}},8047:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var s=r(7821);r(8078);var a=r(2555),n=r(5659);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},3572:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return o}});var s=r(7821),a=r(8078),n=r(7779),i=r(2555),c=r(5659);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});o.displayName="Button"},3197:function(e,t,r){"use strict";r.d(t,{q:function(){return i}});var s=r(7821),a=r(8088);let n=e=>e.includes("localhost")||e.startsWith("/uploads");function i(e){let{src:t,alt:r,className:i,fill:c,sizes:l,...o}=e;return n(t)?c?(0,s.jsx)("img",{src:t,alt:r,className:"absolute inset-0 h-full w-full ".concat(i||""),...o}):(0,s.jsx)("img",{src:t,alt:r,className:i,...o}):(0,s.jsx)(a.default,{src:t,alt:r,className:i,fill:c,sizes:l,...o})}},4888:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(7821),a=r(8078),n=r(4444),i=r(5659);let c=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:c=!0,...l}=e;return(0,s.jsx)(n.f,{ref:t,decorative:c,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...l})});c.displayName=n.f.displayName},8350:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var s=r(7821),a=r(5659);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...r})}},385:function(e,t,r){"use strict";r.d(t,{KQ:function(){return n},hi:function(){return d}});var s=r(758);let a="http://192.168.0.8:4000/api",n="cart_id";class i extends Error{constructor(e,t,r){super(t),this.status=e,this.errors=r,this.name="ApiError"}}async function c(e){let t=await e.json();if(!e.ok)throw new i(e.status,t.message||"An error occurred",t.errors);return t}function l(){return s.Z.get(n)}function o(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t={"Content-Type":"application/json"};if(e){let e=l();e&&(t["X-Cart-Id"]=e)}return t}let d={async getProducts(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[r,s]=e;void 0!==s&&t.append(r,String(s))}),c(await fetch("".concat(a,"/products?").concat(t.toString()),{headers:o(!1)}))},getProduct:async e=>c(await fetch("".concat(a,"/products/").concat(e),{headers:o(!1)})),getFeaturedProducts:async()=>c(await fetch("".concat(a,"/products/featured"),{headers:o(!1)})),getCategories:async()=>c(await fetch("".concat(a,"/categories"),{headers:o(!1)})),getCategoryTree:async()=>c(await fetch("".concat(a,"/categories/tree"),{headers:o(!1)})),async createCart(){var e,t;let r=await fetch("".concat(a,"/cart"),{method:"POST",headers:o(!1)}),i=await c(r);return(null===(e=i.data)||void 0===e?void 0:e.cartId)&&(t=i.data.cartId,s.Z.set(n,t,{expires:365})),i},async getCart(){let e=l();if(!e)return{success:!0,data:{items:[],subtotal:0,itemCount:0}};try{let t=await fetch("".concat(a,"/cart/").concat(e),{headers:o()});return await c(t)}catch(e){if(e instanceof i&&404===e.status)return s.Z.remove(n),{success:!0,data:{items:[],subtotal:0,itemCount:0}};throw e}},async addToCart(e){var t,r;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=l();u||(u=null===(t=(await this.createCart()).data)||void 0===t?void 0:t.cartId);try{let t=await fetch("".concat(a,"/cart/").concat(u,"/items"),{method:"POST",headers:o(),body:JSON.stringify({productId:e,quantity:d})});return await c(t)}catch(t){if(t instanceof i&&404===t.status)return s.Z.remove(n),u=null===(r=(await this.createCart()).data)||void 0===r?void 0:r.cartId,c(await fetch("".concat(a,"/cart/").concat(u,"/items"),{method:"POST",headers:o(),body:JSON.stringify({productId:e,quantity:d})}));throw t}},async updateCartItem(e,t){let r=l();if(!r)throw new i(400,"No cart found");return c(await fetch("".concat(a,"/cart/").concat(r,"/items/").concat(e),{method:"PUT",headers:o(),body:JSON.stringify({quantity:t})}))},async removeFromCart(e){let t=l();if(!t)throw new i(400,"No cart found");return c(await fetch("".concat(a,"/cart/").concat(t,"/items/").concat(e),{method:"DELETE",headers:o()}))},async clearCart(){let e=l();return e?c(await fetch("".concat(a,"/cart/").concat(e,"/items"),{method:"DELETE",headers:o()})):{success:!0,data:null}},async checkout(e){let t=await fetch("".concat(a,"/orders/checkout"),{method:"POST",headers:o(),body:JSON.stringify(e)}),r=await c(t);return r.success&&s.Z.remove(n),r},trackOrder:async e=>c(await fetch("".concat(a,"/orders/track/").concat(e),{headers:o(!1)})),initiatePayment:async(e,t)=>c(await fetch("".concat(a,"/payments/initiate"),{method:"POST",headers:o(!1),body:JSON.stringify({orderId:e,phoneNumber:t})})),checkPaymentStatus:async e=>c(await fetch("".concat(a,"/payments/").concat(e,"/status"),{headers:o(!1)}))};t.ZP=d},2154:function(e,t,r){"use strict";r.d(t,{KQ:function(){return s.KQ},hi:function(){return s.ZP}});var s=r(385)},5659:function(e,t,r){"use strict";r.d(t,{Dx:function(){return l},Jn:function(){return c},T4:function(){return i},cn:function(){return n},ew:function(){return o}});var s=r(6252),a=r(3973);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function i(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XAF",r=Math.round(e).toLocaleString("fr-FR"),s={XAF:"FCFA",USD:"$",EUR:"€",GBP:"\xa3"}[t]||t;return"XAF"===t?"".concat(r," ").concat(s):"".concat(s).concat(r)}("string"==typeof e?parseFloat(e):e,"XAF")}function c(e){var t,r,s;let a=null===(t=e.images)||void 0===t?void 0:t.find(e=>e.isPrimary);return(null==a?void 0:a.url)||(null===(s=e.images)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.url)||"/placeholder-product.png"}function l(e){switch(e){case"PAID":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"FAILED":return"bg-red-100 text-red-800";case"REFUNDED":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}}function o(e){return({PENDING:"Order Placed",PICKED_UP:"Picked Up",IN_TRANSIT:"In Transit",DELIVERED:"Delivered",CANCELLED:"Cancelled"})[e]||e}},3232:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var s=r(1434),a=r(2154);let n=(0,s.Ue)()((e,t)=>({items:[],subtotal:0,itemCount:0,isLoading:!1,isOpen:!1,fetchCart:async()=>{e({isLoading:!0});try{let t=await a.hi.getCart();if(t.success){let r=t.data;e({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0})}}catch(e){console.error("Failed to fetch cart:",e)}finally{e({isLoading:!1})}},addItem:async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e({isLoading:!0});try{let n=await a.hi.addToCart(r,s);if(n.success){let r=n.data;e({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0}),t().openCart()}}catch(e){throw console.error("Failed to add item:",e),e}finally{e({isLoading:!1})}},updateQuantity:async(r,s)=>{if(s<1)return t().removeItem(r);e({isLoading:!0});try{let t=await a.hi.updateCartItem(r,s);if(t.success){let r=t.data;e({items:r.items||[],subtotal:r.subtotal||0,itemCount:r.itemCount||0})}}catch(e){throw console.error("Failed to update quantity:",e),e}finally{e({isLoading:!1})}},removeItem:async t=>{e({isLoading:!0});try{let r=await a.hi.removeFromCart(t);if(r.success){let t=r.data;e({items:t.items||[],subtotal:t.subtotal||0,itemCount:t.itemCount||0})}}catch(e){throw console.error("Failed to remove item:",e),e}finally{e({isLoading:!1})}},clearCart:async()=>{e({isLoading:!0});try{await a.hi.clearCart(),e({items:[],subtotal:0,itemCount:0})}catch(e){throw console.error("Failed to clear cart:",e),e}finally{e({isLoading:!1})}},toggleCart:()=>e(e=>({isOpen:!e.isOpen})),openCart:()=>e({isOpen:!0}),closeCart:()=>e({isOpen:!1})}))}},function(e){e.O(0,[8616,346,8088,9050,8900,8468,7115,9069,1744],function(){return e(e.s=7014)}),_N_E=e.O()}]);
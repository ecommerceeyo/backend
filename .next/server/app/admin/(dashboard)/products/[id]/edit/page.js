(()=>{var e={};e.id=692,e.ids=[692],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10181:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>o,routeModule:()=>h,tree:()=>n});var t=r(7),a=r(8533),i=r(29377),d=r.n(i),c=r(29799),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);r.d(s,l);let n=["",{children:["admin",{children:["(dashboard)",{children:["products",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,96832)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/admin/(dashboard)/products/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,340)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/admin/(dashboard)/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95667)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],o=["/home/wilsonjunior/ecommerce-app/frontend/src/app/admin/(dashboard)/products/[id]/edit/page.tsx"],p="/admin/(dashboard)/products/[id]/edit/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/(dashboard)/products/[id]/edit/page",pathname:"/admin/products/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},61038:(e,s,r)=>{Promise.resolve().then(r.bind(r,22199))},22199:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var t=r(54714),a=r(77580),i=r(57801),d=r(40028),c=r(53278),l=r(29872),n=r(46475),o=r(27114),p=r(31213),u=r(4686),h=r(83446),m=r(83679),x=r(51511),j=r(1715),y=r(27267),g=r(54874),v=r(4214),N=r(57082);function k(){let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[r,k]=(0,a.useState)(!0),[f,P]=(0,a.useState)(!1),[b,I]=(0,a.useState)([]),[Z,S]=(0,a.useState)([]),[A,C]=(0,a.useState)([]),[F,w]=(0,a.useState)([]),[_,q]=(0,a.useState)([]),[M,z]=(0,a.useState)(null),[O,D]=(0,a.useState)({name:"",description:"",price:"",compareAtPrice:"",stock:"",sku:"",categoryId:"",supplierId:"",isActive:!0,isFeatured:!1,isPreorder:!1,preorderNote:""}),[E,V]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{try{let[e,r,t]=await Promise.all([N.Nq.getProduct(s),N.Nq.getCategories(),N.Nq.getSuppliers({status:"ACTIVE",limit:100})]);if(e.success&&e.data){let s=e.data;D({name:s.name,description:s.description||"",price:s.price.toString(),compareAtPrice:s.comparePrice?.toString()||"",stock:s.stock.toString(),sku:s.sku||"",categoryId:s.categories?.[0]?.categoryId||s.categories?.[0]?.category?.id||"",supplierId:s.supplierId||"",isActive:s.active,isFeatured:s.featured,isPreorder:s.isPreorder||!1,preorderNote:s.preorderNote||""}),s.supplierId&&z(s.supplierId),s.images&&C(s.images.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary}))),s.specifications&&w(s.specifications.map(e=>({key:e.key,value:e.value,group:e.group||void 0}))),s.deliveryZones&&q(s.deliveryZones.map(e=>({zoneName:e.zoneName,zoneType:e.zoneType||"city",region:e.region??void 0,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee??void 0,available:e.available??!0,notes:e.notes??void 0})))}if(r.success&&r.data&&I(r.data),t.success&&t.data){let e=t.data,s=Array.isArray(e)?e:e.items||[];S(s)}}catch(e){console.error("Failed to fetch data:",e)}finally{k(!1)}})()},[s]);let Y=()=>{let e={};return O.name.trim()||(e.name="Name is required"),(!O.price||0>=parseFloat(O.price))&&(e.price="Valid price is required"),(!O.stock||0>parseInt(O.stock))&&(e.stock="Valid stock quantity is required"),O.categoryId||(e.categoryId="Category is required"),V(e),0===Object.keys(e).length},T=async r=>{if(r.preventDefault(),Y()){P(!0);try{let r={name:O.name,description:O.description,price:parseFloat(O.price),compareAtPrice:O.compareAtPrice?parseFloat(O.compareAtPrice):void 0,stock:parseInt(O.stock),sku:O.sku||void 0,categoryId:O.categoryId,supplierId:O.supplierId||void 0,isActive:O.isActive,isFeatured:O.isFeatured,isPreorder:O.isPreorder,preorderNote:O.preorderNote||void 0,images:A.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary})),specifications:F.filter(e=>""!==e.value.trim()).map(e=>({key:e.key,value:e.value,group:e.group})),deliveryZones:_.filter(e=>""!==e.zoneName.trim()).map(e=>({zoneName:e.zoneName,zoneType:e.zoneType,region:e.region,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee,available:e.available,notes:e.notes}))},t=await N.Nq.updateProduct(s,r);t.success?e.push("/admin/products"):V({submit:t.error||"Failed to update product"})}catch(e){V({submit:"An error occurred. Please try again."})}finally{P(!1)}}};return r?t.jsx("div",{className:"flex h-screen items-center justify-center",children:t.jsx(d.Z,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{className:"flex flex-col",children:[t.jsx(j.P,{title:"Edit Product"}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)(l.default,{href:"/admin/products",className:"mb-6 inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Back to Products"]}),(0,t.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[E.submit&&t.jsx("div",{className:"rounded-lg bg-destructive/10 p-4 text-sm text-destructive",children:E.submit}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Product Information"})}),(0,t.jsxs)(h.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"name",children:["Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(o.I,{id:"name",value:O.name,onChange:e=>D({...O,name:e.target.value}),placeholder:"Product name"}),E.name&&t.jsx("p",{className:"text-sm text-destructive",children:E.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"description",children:"Description"}),t.jsx(u.g,{id:"description",value:O.description,onChange:e=>D({...O,description:e.target.value}),placeholder:"Product description",rows:5})]})]})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Media"})}),t.jsx(h.aY,{children:t.jsx(y.U,{images:A,onImagesChange:C,maxImages:6})})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Pricing"})}),t.jsx(h.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"price",children:["Price (GHS) ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(o.I,{id:"price",type:"number",step:"0.01",min:"0",value:O.price,onChange:e=>D({...O,price:e.target.value}),placeholder:"0.00"}),E.price&&t.jsx("p",{className:"text-sm text-destructive",children:E.price})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"compareAtPrice",children:"Compare at Price"}),t.jsx(o.I,{id:"compareAtPrice",type:"number",step:"0.01",min:"0",value:O.compareAtPrice,onChange:e=>D({...O,compareAtPrice:e.target.value}),placeholder:"0.00"})]})]})})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Inventory"})}),t.jsx(h.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"stock",children:["Stock ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(o.I,{id:"stock",type:"number",min:"0",value:O.stock,onChange:e=>D({...O,stock:e.target.value}),placeholder:"0"}),E.stock&&t.jsx("p",{className:"text-sm text-destructive",children:E.stock})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"sku",children:"SKU"}),t.jsx(o.I,{id:"sku",value:O.sku,onChange:e=>D({...O,sku:e.target.value}),placeholder:"SKU-001"})]})]})})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Specifications"})}),t.jsx(h.aY,{children:t.jsx(g.l,{specifications:F,onChange:w})})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Delivery Zones & Periods"})}),t.jsx(h.aY,{children:t.jsx(v.J,{deliveryZones:_,onChange:q})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Organization"})}),(0,t.jsxs)(h.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{children:["Category ",t.jsx("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(m.Ph,{value:O.categoryId,onValueChange:e=>D({...O,categoryId:e}),children:[t.jsx(m.i4,{children:t.jsx(m.ki,{placeholder:"Select category"})}),t.jsx(m.Bw,{children:b.map(e=>t.jsx(m.Ql,{value:e.id,children:e.name},e.id))})]}),E.categoryId&&t.jsx("p",{className:"text-sm text-destructive",children:E.categoryId})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{children:"Supplier"}),M?t.jsx("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm",children:Z.find(e=>e.id===M)?.businessName||Z.find(e=>e.id===M)?.name||"Loading supplier..."}):(0,t.jsxs)(m.Ph,{value:O.supplierId||"NONE",onValueChange:e=>D({...O,supplierId:"NONE"===e?"":e}),children:[t.jsx(m.i4,{children:t.jsx(m.ki,{placeholder:"Select supplier (optional)"})}),(0,t.jsxs)(m.Bw,{children:[t.jsx(m.Ql,{value:"NONE",children:"No supplier (Platform owned)"}),Z.map(e=>t.jsx(m.Ql,{value:e.id,children:e.businessName||e.name},e.id))]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:M?"Supplier cannot be changed for supplier-owned products":"Assign this product to a supplier for multi-vendor support"})]})]})]}),(0,t.jsxs)(h.Zb,{children:[t.jsx(h.Ol,{children:t.jsx(h.ll,{children:"Status"})}),(0,t.jsxs)(h.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(p._,{htmlFor:"isActive",children:"Active"}),t.jsx(x.r,{id:"isActive",checked:O.isActive,onCheckedChange:e=>D({...O,isActive:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(p._,{htmlFor:"isFeatured",children:"Featured"}),t.jsx(x.r,{id:"isFeatured",checked:O.isFeatured,onCheckedChange:e=>D({...O,isFeatured:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(p._,{htmlFor:"isPreorder",children:"Pre-order"}),t.jsx(x.r,{id:"isPreorder",checked:O.isPreorder,onCheckedChange:e=>D({...O,isPreorder:e})})]}),O.isPreorder&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"preorderNote",children:"Pre-order Note"}),t.jsx(o.I,{id:"preorderNote",value:O.preorderNote,onChange:e=>D({...O,preorderNote:e.target.value}),placeholder:"e.g., Ships in 2-3 weeks"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Shown to customers when they order this product"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[t.jsx(l.default,{href:"/admin/products",children:t.jsx(n.z,{type:"button",variant:"outline",children:"Cancel"})}),t.jsx(n.z,{type:"submit",disabled:f,children:f?(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})]})}},4613:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},10137:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},45823:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},47787:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]])},44758:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},3682:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},96156:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},18510:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]])},96832:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>d});let t=(0,r(71481).createProxy)(String.raw`/home/wilsonjunior/ecommerce-app/frontend/src/app/admin/(dashboard)/products/[id]/edit/page.tsx`),{__esModule:a,$$typeof:i}=t,d=t.default}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3499,6075,5303,9872,6710,6227,1824,9236,873,3206,2004],()=>r(10181));module.exports=t})();
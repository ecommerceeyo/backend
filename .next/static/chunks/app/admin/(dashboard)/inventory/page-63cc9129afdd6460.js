(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3706],{1333:function(e,s,t){Promise.resolve().then(t.bind(t,6876))},6876:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var n=t(7821),l=t(8078),a=t(2904),r=t(9554),c=t(7972),i=t(7855),o=t(9388),d=t(189),x=t(3572),h=t(9827),u=t(8407),j=t(5537),m=t(870),f=t(5280),p=t(3481),g=t(8047),N=t(2098),v=t(6622);function y(){let[e,s]=(0,l.useState)([]),[t,y]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[b,S]=(0,l.useState)(!0),[C,Z]=(0,l.useState)(""),[z,L]=(0,l.useState)(null),[P,O]=(0,l.useState)(!1),[I,R]=(0,l.useState)(""),[_,A]=(0,l.useState)("set"),[D,T]=(0,l.useState)(!1),[V,Y]=(0,l.useState)("all");(0,l.useEffect)(()=>{q()},[]);let q=async()=>{S(!0);try{let[e,t,n]=await Promise.all([v.Nq.getProducts({limit:100}),v.Nq.getLowStockProducts(),v.Nq.getInventoryLogs({limit:50})]);e.success&&s(e.data||[]),t.success&&y(t.data||[]),n.success&&k(n.data||[])}catch(e){console.error("Failed to fetch inventory data:",e)}finally{S(!1)}},U=e=>{L(e),R(String(e.stock)),A("set"),O(!0)},F=async()=>{if(z&&I){T(!0);try{let e=parseInt(I);(await v.Nq.updateStock(z.id,e,_)).success&&(O(!1),q())}catch(e){console.error("Failed to update stock:",e)}finally{T(!1)}}},M=e.filter(e=>{var s;return e.name.toLowerCase().includes(C.toLowerCase())||(null===(s=e.sku)||void 0===s?void 0:s.toLowerCase().includes(C.toLowerCase()))}),Q=e=>e.stock<=0?{label:"Out of Stock",variant:"destructive"}:e.stock<=e.lowStockThreshold?{label:"Low Stock",variant:"warning"}:{label:"In Stock",variant:"default"},E=e=>new Date(e).toLocaleString(),K=e.length,B=e.filter(e=>e.stock<=0).length,$=t.length;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(N.P,{title:"Inventory Management"}),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,n.jsxs)(j.Zb,{children:[(0,n.jsxs)(j.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j.ll,{className:"text-sm font-medium",children:"Total Products"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(j.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:K})})]}),(0,n.jsxs)(j.Zb,{children:[(0,n.jsxs)(j.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j.ll,{className:"text-sm font-medium",children:"Low Stock"}),(0,n.jsx)(r.Z,{className:"h-4 w-4 text-yellow-500"})]}),(0,n.jsx)(j.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:$})})]}),(0,n.jsxs)(j.Zb,{children:[(0,n.jsxs)(j.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j.ll,{className:"text-sm font-medium",children:"Out of Stock"}),(0,n.jsx)(c.Z,{className:"h-4 w-4 text-red-500"})]}),(0,n.jsx)(j.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:B})})]}),(0,n.jsxs)(j.Zb,{children:[(0,n.jsxs)(j.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j.ll,{className:"text-sm font-medium",children:"In Stock"}),(0,n.jsx)(i.Z,{className:"h-4 w-4 text-green-500"})]}),(0,n.jsx)(j.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:K-B-$})})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 border-b",children:[(0,n.jsx)(x.z,{variant:"all"===V?"default":"ghost",onClick:()=>Y("all"),children:"All Products"}),(0,n.jsxs)(x.z,{variant:"low-stock"===V?"default":"ghost",onClick:()=>Y("low-stock"),children:["Low Stock (",$,")"]}),(0,n.jsx)(x.z,{variant:"logs"===V?"default":"ghost",onClick:()=>Y("logs"),children:"Inventory Logs"})]}),"all"===V&&(0,n.jsxs)(j.Zb,{children:[(0,n.jsx)(j.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(j.ll,{children:"Product Inventory"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(o.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(h.I,{placeholder:"Search products...",value:C,onChange:e=>Z(e.target.value),className:"pl-8 w-64"})]}),(0,n.jsx)(x.z,{variant:"outline",size:"icon",onClick:q,children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})]})]})}),(0,n.jsx)(j.aY,{children:(0,n.jsxs)(m.iA,{children:[(0,n.jsx)(m.xD,{children:(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.ss,{children:"Product"}),(0,n.jsx)(m.ss,{children:"SKU"}),(0,n.jsx)(m.ss,{children:"Stock"}),(0,n.jsx)(m.ss,{children:"Low Stock Threshold"}),(0,n.jsx)(m.ss,{children:"Status"}),(0,n.jsx)(m.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(m.RM,{children:b?(0,n.jsx)(m.SC,{children:(0,n.jsx)(m.pj,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):0===M.length?(0,n.jsx)(m.SC,{children:(0,n.jsx)(m.pj,{colSpan:6,className:"text-center py-8",children:"No products found"})}):M.map(e=>{let s=Q(e);return(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(m.pj,{children:e.sku||"-"}),(0,n.jsx)(m.pj,{children:(0,n.jsx)("span",{className:e.stock<=0?"text-red-600 font-bold":e.stock<=e.lowStockThreshold?"text-yellow-600 font-bold":"",children:e.stock})}),(0,n.jsx)(m.pj,{children:e.lowStockThreshold}),(0,n.jsx)(m.pj,{children:(0,n.jsx)(g.C,{variant:"warning"===s.variant?"outline":s.variant,className:"warning"===s.variant?"border-yellow-500 text-yellow-600":"",children:s.label})}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,n.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>U(e),children:"Update Stock"})})]},e.id)})})]})})]}),"low-stock"===V&&(0,n.jsxs)(j.Zb,{children:[(0,n.jsx)(j.Ol,{children:(0,n.jsxs)(j.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(r.Z,{className:"h-5 w-5 text-yellow-500"}),"Low Stock Products"]})}),(0,n.jsx)(j.aY,{children:(0,n.jsxs)(m.iA,{children:[(0,n.jsx)(m.xD,{children:(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.ss,{children:"Product"}),(0,n.jsx)(m.ss,{children:"SKU"}),(0,n.jsx)(m.ss,{children:"Current Stock"}),(0,n.jsx)(m.ss,{children:"Threshold"}),(0,n.jsx)(m.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(m.RM,{children:0===t.length?(0,n.jsx)(m.SC,{children:(0,n.jsx)(m.pj,{colSpan:5,className:"text-center py-8",children:"No low stock products"})}):t.map(e=>(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(m.pj,{children:e.sku||"-"}),(0,n.jsx)(m.pj,{children:(0,n.jsx)("span",{className:e.stock<=0?"text-red-600 font-bold":"text-yellow-600 font-bold",children:e.stock})}),(0,n.jsx)(m.pj,{children:e.lowStockThreshold}),(0,n.jsx)(m.pj,{className:"text-right",children:(0,n.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>U(e),children:"Restock"})})]},e.id))})]})})]}),"logs"===V&&(0,n.jsxs)(j.Zb,{children:[(0,n.jsx)(j.Ol,{children:(0,n.jsx)(j.ll,{children:"Inventory Activity Log"})}),(0,n.jsx)(j.aY,{children:(0,n.jsxs)(m.iA,{children:[(0,n.jsx)(m.xD,{children:(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.ss,{children:"Date"}),(0,n.jsx)(m.ss,{children:"Product"}),(0,n.jsx)(m.ss,{children:"Previous"}),(0,n.jsx)(m.ss,{children:"Change"}),(0,n.jsx)(m.ss,{children:"New"}),(0,n.jsx)(m.ss,{children:"Reason"}),(0,n.jsx)(m.ss,{children:"Reference"})]})}),(0,n.jsx)(m.RM,{children:0===w.length?(0,n.jsx)(m.SC,{children:(0,n.jsx)(m.pj,{colSpan:7,className:"text-center py-8",children:"No inventory logs"})}):w.map(e=>(0,n.jsxs)(m.SC,{children:[(0,n.jsx)(m.pj,{className:"text-sm",children:E(e.createdAt)}),(0,n.jsx)(m.pj,{className:"font-medium",children:e.productName}),(0,n.jsx)(m.pj,{children:e.previousStock}),(0,n.jsx)(m.pj,{children:(0,n.jsxs)("span",{className:e.change>0?"text-green-600":e.change<0?"text-red-600":"",children:[e.change>0?"+":"",e.change]})}),(0,n.jsx)(m.pj,{children:e.newStock}),(0,n.jsx)(m.pj,{children:(0,n.jsx)(g.C,{variant:"outline",children:e.reason})}),(0,n.jsx)(m.pj,{className:"text-sm text-muted-foreground",children:e.referenceType?"".concat(e.referenceType):"-"})]},e.id))})]})})]}),(0,n.jsx)(f.Vq,{open:P,onOpenChange:O,children:(0,n.jsxs)(f.cZ,{children:[(0,n.jsx)(f.fK,{children:(0,n.jsxs)(f.$N,{children:["Update Stock - ",null==z?void 0:z.name]})}),(0,n.jsxs)("div",{className:"space-y-4 py-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)(u._,{children:["Current Stock: ",null==z?void 0:z.stock]})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u._,{htmlFor:"operation",children:"Operation"}),(0,n.jsxs)(p.Ph,{value:_,onValueChange:e=>A(e),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"set",children:"Set to exact value"}),(0,n.jsx)(p.Ql,{value:"increment",children:"Add to stock"}),(0,n.jsx)(p.Ql,{value:"decrement",children:"Subtract from stock"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u._,{htmlFor:"stock",children:"set"===_?"New Stock Value":"increment"===_?"Quantity to Add":"Quantity to Subtract"}),(0,n.jsx)(h.I,{id:"stock",type:"number",min:"0",value:I,onChange:e=>R(e.target.value)})]}),"set"!==_&&z&&(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["New stock will be:"," ",(0,n.jsx)("span",{className:"font-medium",children:"increment"===_?z.stock+parseInt(I||"0"):Math.max(0,z.stock-parseInt(I||"0"))})]})]}),(0,n.jsxs)(f.cN,{children:[(0,n.jsx)(x.z,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,n.jsx)(x.z,{onClick:F,disabled:D,children:D?"Updating...":"Update Stock"})]})]})})]})]})}},8047:function(e,s,t){"use strict";t.d(s,{C:function(){return c}});var n=t(7821);t(8078);var l=t(2555),a=t(5659);let r=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,...l}=e;return(0,n.jsx)("div",{className:(0,a.cn)(r({variant:t}),s),...l})}},5280:function(e,s,t){"use strict";t.d(s,{$N:function(){return m},Be:function(){return f},Vq:function(){return i},cN:function(){return j},cZ:function(){return h},fK:function(){return u},hg:function(){return o}});var n=t(7821),l=t(8078),a=t(611),r=t(5747),c=t(5659);let i=a.fC,o=a.xz,d=a.h_;a.x8;let x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,n.jsx)(a.aV,{ref:s,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});x.displayName=a.aV.displayName;let h=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(x,{}),(0,n.jsxs)(a.VY,{ref:s,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[l,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(r.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=a.VY.displayName;let u=e=>{let{className:s,...t}=e;return(0,n.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};u.displayName="DialogHeader";let j=e=>{let{className:s,...t}=e;return(0,n.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};j.displayName="DialogFooter";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,n.jsx)(a.Dx,{ref:s,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});m.displayName=a.Dx.displayName;let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,n.jsx)(a.dk,{ref:s,className:(0,c.cn)("text-sm text-muted-foreground",t),...l})});f.displayName=a.dk.displayName},8407:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var n=t(7821),l=t(8078),a=t(5895),r=t(2555),c=t(5659);let i=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,n.jsx)(a.f,{ref:s,className:(0,c.cn)(i(),t),...l})});o.displayName=a.f.displayName}},function(e){e.O(0,[8616,7886,9216,807,6637,3444,8471,3929,657,7115,9069,1744],function(){return e(e.s=1333)}),_N_E=e.O()}]);
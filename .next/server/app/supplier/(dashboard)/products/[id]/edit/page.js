(()=>{var e={};e.id=7648,e.ids=[7648],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},81533:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>c.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>o,routeModule:()=>m,tree:()=>l});var i=r(7),t=r(8533),a=r(29377),c=r.n(a),n=r(29799),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let l=["",{children:["supplier",{children:["(dashboard)",{children:["products",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18933)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,34692)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95667)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],o=["/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/[id]/edit/page.tsx"],p="/supplier/(dashboard)/products/[id]/edit/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/supplier/(dashboard)/products/[id]/edit/page",pathname:"/supplier/products/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},17059:(e,s,r)=>{Promise.resolve().then(r.bind(r,5466))},5466:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var i=r(54714),t=r(77580),a=r(57801),c=r(40028),n=r(53278),d=r(29872),l=r(46475),o=r(27114),p=r(31213),u=r(4686),m=r(83446),x=r(83679),h=r(51511),j=r(27267),g=r(54874),y=r(4214),v=r(13586);function N(){let e=(0,a.useRouter)(),s=(0,a.useParams)().id,[r,N]=(0,t.useState)(!0),[P,f]=(0,t.useState)(!1),[b,k]=(0,t.useState)([]),[I,_]=(0,t.useState)([]),[A,C]=(0,t.useState)([]),[S,F]=(0,t.useState)([]),[w,Z]=(0,t.useState)({name:"",description:"",price:"",compareAtPrice:"",stock:"",sku:"",categoryId:"",isActive:!0,isPreorder:!1,preorderNote:""}),[q,z]=(0,t.useState)({});(0,t.useEffect)(()=>{(async()=>{try{let[e,r]=await Promise.all([v.R.getProduct(s),v.R.getCategories()]);if(e.success&&e.data){let s=e.data;Z({name:s.name,description:s.description||"",price:s.price.toString(),compareAtPrice:s.comparePrice?.toString()||"",stock:s.stock.toString(),sku:s.sku||"",categoryId:s.categories?.[0]?.categoryId||s.categories?.[0]?.category?.id||"",isActive:s.active,isPreorder:s.isPreorder||!1,preorderNote:s.preorderNote||""}),s.images&&_(s.images.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary}))),s.specifications&&C(s.specifications.map(e=>({key:e.key,value:e.value,group:e.group||void 0}))),s.deliveryZones&&F(s.deliveryZones.map(e=>({zoneName:e.zoneName,zoneType:e.zoneType||"city",region:e.region??void 0,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee??void 0,available:e.available??!0,notes:e.notes??void 0})))}r.success&&r.data&&k(r.data)}catch(e){console.error("Failed to fetch data:",e),z({submit:"Failed to load product data"})}finally{N(!1)}})()},[s]);let D=()=>{let e={};return w.name.trim()||(e.name="Name is required"),(!w.price||0>=parseFloat(w.price))&&(e.price="Valid price is required"),(!w.stock||0>parseInt(w.stock))&&(e.stock="Valid stock quantity is required"),w.categoryId||(e.categoryId="Category is required"),z(e),0===Object.keys(e).length},O=async r=>{if(r.preventDefault(),D()){f(!0);try{let r={name:w.name,description:w.description,price:parseFloat(w.price),compareAtPrice:w.compareAtPrice?parseFloat(w.compareAtPrice):void 0,stock:parseInt(w.stock),sku:w.sku||void 0,categoryId:w.categoryId,isActive:w.isActive,isPreorder:w.isPreorder,preorderNote:w.preorderNote||void 0,images:I.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary})),specifications:A.filter(e=>""!==e.value.trim()).map(e=>({key:e.key,value:e.value,group:e.group})),deliveryZones:S.filter(e=>""!==e.zoneName.trim()).map(e=>({zoneName:e.zoneName,zoneType:e.zoneType,region:e.region,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee,available:e.available,notes:e.notes}))},i=await v.R.updateProduct(s,r);i.success?e.push("/supplier/products"):z({submit:i.error||"Failed to update product"})}catch(e){z({submit:e.message||"An error occurred. Please try again."})}finally{f(!1)}}};return r?i.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:i.jsx(c.Z,{className:"h-8 w-8 animate-spin"})}):(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)(d.default,{href:"/supplier/products",className:"mb-6 inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[i.jsx(n.Z,{className:"mr-2 h-4 w-4"}),"Back to Products"]}),(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),i.jsx("p",{className:"text-muted-foreground",children:"Update your product information"})]}),(0,i.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[q.submit&&i.jsx("div",{className:"rounded-lg bg-destructive/10 p-4 text-sm text-destructive",children:q.submit}),(0,i.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,i.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Product Information"})}),(0,i.jsxs)(m.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(p._,{htmlFor:"name",children:["Name ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx(o.I,{id:"name",value:w.name,onChange:e=>Z({...w,name:e.target.value}),placeholder:"Product name"}),q.name&&i.jsx("p",{className:"text-sm text-destructive",children:q.name})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"description",children:"Description"}),i.jsx(u.g,{id:"description",value:w.description,onChange:e=>Z({...w,description:e.target.value}),placeholder:"Product description",rows:5})]})]})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Media"})}),i.jsx(m.aY,{children:i.jsx(j.U,{images:I,onImagesChange:_,maxImages:6})})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Pricing"})}),i.jsx(m.aY,{className:"space-y-4",children:(0,i.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(p._,{htmlFor:"price",children:["Price (FCFA) ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx(o.I,{id:"price",type:"number",step:"1",min:"0",value:w.price,onChange:e=>Z({...w,price:e.target.value}),placeholder:"0"}),q.price&&i.jsx("p",{className:"text-sm text-destructive",children:q.price})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"compareAtPrice",children:"Compare at Price"}),i.jsx(o.I,{id:"compareAtPrice",type:"number",step:"1",min:"0",value:w.compareAtPrice,onChange:e=>Z({...w,compareAtPrice:e.target.value}),placeholder:"0"})]})]})})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Inventory"})}),i.jsx(m.aY,{className:"space-y-4",children:(0,i.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(p._,{htmlFor:"stock",children:["Stock ",i.jsx("span",{className:"text-destructive",children:"*"})]}),i.jsx(o.I,{id:"stock",type:"number",min:"0",value:w.stock,onChange:e=>Z({...w,stock:e.target.value}),placeholder:"0"}),q.stock&&i.jsx("p",{className:"text-sm text-destructive",children:q.stock})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"sku",children:"SKU"}),i.jsx(o.I,{id:"sku",value:w.sku,onChange:e=>Z({...w,sku:e.target.value}),placeholder:"SKU-001"})]})]})})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Specifications"})}),i.jsx(m.aY,{children:i.jsx(g.l,{specifications:A,onChange:C})})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Delivery Zones & Periods"})}),i.jsx(m.aY,{children:i.jsx(y.J,{deliveryZones:S,onChange:F})})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Organization"})}),i.jsx(m.aY,{className:"space-y-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(p._,{children:["Category ",i.jsx("span",{className:"text-destructive",children:"*"})]}),(0,i.jsxs)(x.Ph,{value:w.categoryId,onValueChange:e=>Z({...w,categoryId:e}),children:[i.jsx(x.i4,{children:i.jsx(x.ki,{placeholder:"Select category"})}),i.jsx(x.Bw,{children:b.map(e=>i.jsx(x.Ql,{value:e.id,children:e.name},e.id))})]}),q.categoryId&&i.jsx("p",{className:"text-sm text-destructive",children:q.categoryId})]})})]}),(0,i.jsxs)(m.Zb,{children:[i.jsx(m.Ol,{children:i.jsx(m.ll,{children:"Status"})}),(0,i.jsxs)(m.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx(p._,{htmlFor:"isActive",children:"Active"}),i.jsx(h.r,{id:"isActive",checked:w.isActive,onCheckedChange:e=>Z({...w,isActive:e})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx(p._,{htmlFor:"isPreorder",children:"Pre-order"}),i.jsx(h.r,{id:"isPreorder",checked:w.isPreorder,onCheckedChange:e=>Z({...w,isPreorder:e})})]}),w.isPreorder&&(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(p._,{htmlFor:"preorderNote",children:"Pre-order Note"}),i.jsx(o.I,{id:"preorderNote",value:w.preorderNote,onChange:e=>Z({...w,preorderNote:e.target.value}),placeholder:"e.g., Ships in 2-3 weeks"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Shown to customers when they order this product"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-4",children:[i.jsx(d.default,{href:"/supplier/products",children:i.jsx(l.z,{type:"button",variant:"outline",children:"Cancel"})}),i.jsx(l.z,{type:"submit",disabled:P,children:P?(0,i.jsxs)(i.Fragment,{children:[i.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}},57469:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(20537).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},18933:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>t,default:()=>c});let i=(0,r(71481).createProxy)(String.raw`/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/[id]/edit/page.tsx`),{__esModule:t,$$typeof:a}=i,c=i.default}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),i=s.X(0,[3499,6075,5303,9872,6710,6227,1824,9236,873,4774,2004],()=>r(81533));module.exports=i})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5072],{5596:function(e,s,n){Promise.resolve().then(n.bind(n,8534))},8534:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return w}});var t=n(7821),a=n(8078),i=n(6665),l=n(979),r=n(316),c=n(499),d=n(9388),o=n(7731),u=n(1701),x=n(2904),h=n(6069),m=n(6187),p=n(3572),j=n(9827),f=n(8047),g=n(870),v=n(1502),N=n(3481),y=n(5280),C=n(8407),b=n(2098),S=n(6622);let k={PENDING:{label:"Pending",variant:"outline",icon:l.Z},ACTIVE:{label:"Active",variant:"default",icon:r.Z},SUSPENDED:{label:"Suspended",variant:"destructive",icon:c.Z},INACTIVE:{label:"Inactive",variant:"secondary",icon:c.Z}};function w(){let e=(0,i.useRouter)(),[s,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[c,w]=(0,a.useState)(""),[P,U]=(0,a.useState)(""),[Z,I]=(0,a.useState)(null),[E,A]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[M,V]=(0,a.useState)(!1),[R,q]=(0,a.useState)(null),[F,B]=(0,a.useState)(""),[_,T]=(0,a.useState)(""),[L,O]=(0,a.useState)({page:1,limit:20,total:0,totalPages:0}),Q=async()=>{r(!0);try{let e=await S.Nq.getSuppliers({page:L.page,limit:L.limit,status:P||void 0,search:c||void 0});if(e.success){let s=e.data.items||e.data||[];n(Array.isArray(s)?s:[]),e.data.pagination&&O(s=>({...s,...e.data.pagination}))}}catch(e){console.error("Failed to fetch suppliers:",e),n([])}finally{r(!1)}};(0,a.useEffect)(()=>{Q()},[L.page,P,c]);let X=async()=>{if(Z&&E){V(!0);try{await S.Nq.updateSupplierStatus(Z.id,E),Q(),q(null),I(null)}catch(e){console.error("Failed to update status:",e)}finally{V(!1)}}},$=async()=>{if(Z&&z){V(!0);try{await S.Nq.updateSupplierCommission(Z.id,parseFloat(z)),Q(),q(null),I(null)}catch(e){console.error("Failed to update commission:",e)}finally{V(!1)}}},G=async()=>{if(Z&&F){V(!0);try{await S.Nq.updateSupplierMaxUsers(Z.id,parseInt(F)),Q(),q(null),I(null)}catch(e){console.error("Failed to update max users:",e)}finally{V(!1)}}},K=async()=>{if(Z&&_){V(!0);try{await S.Nq.updateSupplierMaxProducts(Z.id,parseInt(_)),Q(),q(null),I(null)}catch(e){console.error("Failed to update max products:",e)}finally{V(!1)}}},H=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(b.P,{title:"Suppliers"}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(d.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(j.I,{placeholder:"Search suppliers...",value:c,onChange:e=>w(e.target.value),className:"pl-9"})]}),(0,t.jsxs)(N.Ph,{value:P||"ALL",onValueChange:e=>U("ALL"===e?"":e),children:[(0,t.jsx)(N.i4,{className:"w-[180px]",children:(0,t.jsx)(N.ki,{placeholder:"All statuses"})}),(0,t.jsxs)(N.Bw,{children:[(0,t.jsx)(N.Ql,{value:"ALL",children:"All statuses"}),(0,t.jsx)(N.Ql,{value:"PENDING",children:"Pending"}),(0,t.jsx)(N.Ql,{value:"ACTIVE",children:"Active"}),(0,t.jsx)(N.Ql,{value:"SUSPENDED",children:"Suspended"}),(0,t.jsx)(N.Ql,{value:"INACTIVE",children:"Inactive"})]})]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-4",children:["PENDING","ACTIVE","SUSPENDED","INACTIVE"].map(e=>{let n=k[e],a=(s||[]).filter(s=>s.status===e).length;return(0,t.jsxs)("div",{className:"rounded-lg border bg-background p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.icon,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:n.label})]}),(0,t.jsx)("p",{className:"mt-2 text-2xl font-bold",children:a})]},e)})}),(0,t.jsx)("div",{className:"rounded-lg border bg-background",children:(0,t.jsxs)(g.iA,{children:[(0,t.jsx)(g.xD,{children:(0,t.jsxs)(g.SC,{children:[(0,t.jsx)(g.ss,{children:"Business"}),(0,t.jsx)(g.ss,{children:"Contact"}),(0,t.jsx)(g.ss,{children:"Products"}),(0,t.jsx)(g.ss,{children:"Commission"}),(0,t.jsx)(g.ss,{children:"Max Users"}),(0,t.jsx)(g.ss,{children:"Max Products"}),(0,t.jsx)(g.ss,{children:"Status"}),(0,t.jsx)(g.ss,{children:"Joined"}),(0,t.jsx)(g.ss,{className:"w-[50px]"})]})}),(0,t.jsx)(g.RM,{children:l?(0,t.jsx)(g.SC,{children:(0,t.jsx)(g.pj,{colSpan:9,className:"h-24 text-center",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})}):0===s.length?(0,t.jsx)(g.SC,{children:(0,t.jsx)(g.pj,{colSpan:9,className:"h-24 text-center text-muted-foreground",children:"No suppliers found"})}):s.map(s=>{var n;let a=k[s.status]||k.PENDING,i=a.icon;return(0,t.jsxs)(g.SC,{children:[(0,t.jsx)(g.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,t.jsx)(o.Z,{className:"h-5 w-5 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:s.businessName}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:s.slug})]})]})}),(0,t.jsx)(g.pj,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm",children:s.email}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:s.phone||"-"})]})}),(0,t.jsx)(g.pj,{children:(null===(n=s._count)||void 0===n?void 0:n.products)||0}),(0,t.jsxs)(g.pj,{children:[s.commissionRate,"%"]}),(0,t.jsx)(g.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{children:s.maxUsers||5})]})}),(0,t.jsx)(g.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsx)("span",{children:s.maxProducts||100})]})}),(0,t.jsx)(g.pj,{children:(0,t.jsxs)(f.C,{variant:a.variant,className:"gap-1",children:[(0,t.jsx)(i,{className:"h-3 w-3"}),a.label]})}),(0,t.jsx)(g.pj,{className:"text-sm text-muted-foreground",children:H(s.createdAt)}),(0,t.jsx)(g.pj,{children:(0,t.jsxs)(v.h_,{children:[(0,t.jsx)(v.$F,{asChild:!0,children:(0,t.jsx)(p.z,{variant:"ghost",size:"icon",children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(v.AW,{align:"end",children:[(0,t.jsxs)(v.Xi,{onClick:()=>e.push("/admin/suppliers/".concat(s.id)),children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsxs)(v.Xi,{onClick:()=>e.push("/admin/suppliers/".concat(s.id,"?tab=users")),children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Manage Users & Roles"]}),(0,t.jsx)(v.VD,{}),(0,t.jsx)(v.Xi,{onClick:()=>{I(s),A(s.status),q("status")},children:"Change Status"}),(0,t.jsx)(v.Xi,{onClick:()=>{I(s),D(s.commissionRate.toString()),q("commission")},children:"Update Commission"}),(0,t.jsx)(v.Xi,{onClick:()=>{I(s),B((s.maxUsers||5).toString()),q("maxUsers")},children:"Update Max Users"}),(0,t.jsx)(v.Xi,{onClick:()=>{I(s),T((s.maxProducts||100).toString()),q("maxProducts")},children:"Update Max Products"})]})]})})]},s.id)})})]})}),L.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",s.length," of ",L.total," suppliers"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p.z,{variant:"outline",size:"sm",disabled:1===L.page,onClick:()=>O(e=>({...e,page:e.page-1})),children:"Previous"}),(0,t.jsx)(p.z,{variant:"outline",size:"sm",disabled:L.page===L.totalPages,onClick:()=>O(e=>({...e,page:e.page+1})),children:"Next"})]})]})]}),(0,t.jsx)(y.Vq,{open:"status"===R,onOpenChange:()=>q(null),children:(0,t.jsxs)(y.cZ,{children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsx)(y.$N,{children:"Change Supplier Status"}),(0,t.jsxs)(y.Be,{children:["Update status for ",null==Z?void 0:Z.businessName]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C._,{children:"Status"}),(0,t.jsxs)(N.Ph,{value:E,onValueChange:A,children:[(0,t.jsx)(N.i4,{children:(0,t.jsx)(N.ki,{})}),(0,t.jsxs)(N.Bw,{children:[(0,t.jsx)(N.Ql,{value:"PENDING",children:"Pending"}),(0,t.jsx)(N.Ql,{value:"ACTIVE",children:"Active"}),(0,t.jsx)(N.Ql,{value:"SUSPENDED",children:"Suspended"}),(0,t.jsx)(N.Ql,{value:"INACTIVE",children:"Inactive"})]})]})]})}),(0,t.jsxs)(y.cN,{children:[(0,t.jsx)(p.z,{variant:"outline",onClick:()=>q(null),children:"Cancel"}),(0,t.jsx)(p.z,{onClick:X,disabled:M,children:M?"Updating...":"Update Status"})]})]})}),(0,t.jsx)(y.Vq,{open:"commission"===R,onOpenChange:()=>q(null),children:(0,t.jsxs)(y.cZ,{children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsx)(y.$N,{children:"Update Commission Rate"}),(0,t.jsxs)(y.Be,{children:["Set commission rate for ",null==Z?void 0:Z.businessName]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C._,{htmlFor:"commission",children:"Commission Rate (%)"}),(0,t.jsx)(j.I,{id:"commission",type:"number",min:"0",max:"100",step:"0.1",value:z,onChange:e=>D(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This percentage will be deducted from the supplier's earnings"})]})}),(0,t.jsxs)(y.cN,{children:[(0,t.jsx)(p.z,{variant:"outline",onClick:()=>q(null),children:"Cancel"}),(0,t.jsx)(p.z,{onClick:$,disabled:M,children:M?"Updating...":"Update Commission"})]})]})}),(0,t.jsx)(y.Vq,{open:"maxUsers"===R,onOpenChange:()=>q(null),children:(0,t.jsxs)(y.cZ,{children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsx)(y.$N,{children:"Update Max Users"}),(0,t.jsxs)(y.Be,{children:["Set maximum number of users for ",null==Z?void 0:Z.businessName]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C._,{htmlFor:"maxUsers",children:"Maximum Users"}),(0,t.jsx)(j.I,{id:"maxUsers",type:"number",min:"1",max:"100",step:"1",value:F,onChange:e=>B(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum number of admin users allowed for this supplier"})]})}),(0,t.jsxs)(y.cN,{children:[(0,t.jsx)(p.z,{variant:"outline",onClick:()=>q(null),children:"Cancel"}),(0,t.jsx)(p.z,{onClick:G,disabled:M,children:M?"Updating...":"Update Max Users"})]})]})}),(0,t.jsx)(y.Vq,{open:"maxProducts"===R,onOpenChange:()=>q(null),children:(0,t.jsxs)(y.cZ,{children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsx)(y.$N,{children:"Update Max Products"}),(0,t.jsxs)(y.Be,{children:["Set maximum number of products for ",null==Z?void 0:Z.businessName]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C._,{htmlFor:"maxProducts",children:"Maximum Products"}),(0,t.jsx)(j.I,{id:"maxProducts",type:"number",min:"1",max:"10000",step:"1",value:_,onChange:e=>T(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum number of products this supplier can list"})]})}),(0,t.jsxs)(y.cN,{children:[(0,t.jsx)(p.z,{variant:"outline",onClick:()=>q(null),children:"Cancel"}),(0,t.jsx)(p.z,{onClick:K,disabled:M,children:M?"Updating...":"Update Max Products"})]})]})})]})}},2098:function(e,s,n){"use strict";n.d(s,{P:function(){return x}});var t=n(7821),a=n(9388),i=n(1149),l=n(3263),r=n(3572),c=n(9827),d=n(1502),o=n(2285),u=n(6665);function x(e){let{title:s}=e,{admin:n,logout:x}=(0,o.t)(),h=(0,u.useRouter)();return(0,t.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:s&&(0,t.jsx)("h1",{className:"text-xl font-semibold",children:s})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative hidden md:block",children:[(0,t.jsx)(a.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(c.I,{placeholder:"Search...",className:"w-64 pl-10"})]}),(0,t.jsxs)(r.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,t.jsx)(i.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"absolute right-1 top-1 h-2 w-2 rounded-full bg-destructive"})]}),(0,t.jsxs)(d.h_,{children:[(0,t.jsx)(d.$F,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"ghost",size:"icon",children:(0,t.jsx)(l.Z,{className:"h-5 w-5"})})}),(0,t.jsxs)(d.AW,{align:"end",className:"w-56",children:[(0,t.jsx)(d.Ju,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:null==n?void 0:n.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:null==n?void 0:n.email})]})}),(0,t.jsx)(d.VD,{}),(0,t.jsx)(d.Xi,{onClick:()=>h.push("/admin/settings"),children:"Settings"}),(0,t.jsx)(d.VD,{}),(0,t.jsx)(d.Xi,{onClick:()=>{x(),h.push("/admin/login")},className:"text-destructive",children:"Logout"})]})]})]})]})}},1149:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},316:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},499:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},979:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6187:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2904:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9388:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3263:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(2210).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6665:function(e,s,n){"use strict";var t=n(319);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"usePathname")&&n.d(s,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(s,{useSearchParams:function(){return t.useSearchParams}})},758:function(e,s,n){"use strict";/*! js-cookie v3.0.5 | MIT */function t(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var t in n)e[t]=n[t]}return e}n.d(s,{Z:function(){return a}});var a=function e(s,n){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=t({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var r in i)i[r]&&(l+="; "+r,!0!==i[r]&&(l+="="+i[r].split(";")[0]));return document.cookie=e+"="+s.write(a,e)+l}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],t={},a=0;a<n.length;a++){var i=n[a].split("="),l=i.slice(1).join("=");try{var r=decodeURIComponent(i[0]);if(t[r]=s.read(l,r),e===r)break}catch(e){}}return e?t[e]:t}},remove:function(e,s){a(e,"",t({},s,{expires:-1}))},withAttributes:function(s){return e(this.converter,t({},this.attributes,s))},withConverter:function(s){return e(t({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(s)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[8616,7886,9216,807,6637,3444,934,3929,7644,7115,9069,1744],function(){return e(e.s=5596)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6312],{4337:function(e,s,t){Promise.resolve().then(t.bind(t,6619))},6619:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var r=t(7821),a=t(8078),i=t(6665),c=t(4601),l=t(5002),d=t(346),n=t(3572),o=t(9827),u=t(8407),m=t(5445),p=t(5537),x=t(3481),h=t(8770),j=t(2098),f=t(7251),N=t(7944),v=t(8153),g=t(6622);function y(){let e=(0,i.useRouter)(),[s,t]=(0,a.useState)(!1),[y,b]=(0,a.useState)([]),[k,w]=(0,a.useState)([]),[P,C]=(0,a.useState)([]),[F,I]=(0,a.useState)([]),[Z,A]=(0,a.useState)([]),[S,_]=(0,a.useState)({name:"",description:"",price:"",compareAtPrice:"",stock:"",sku:"",categoryId:"",supplierId:"",isActive:!0,isFeatured:!1,isPreorder:!1,preorderNote:""}),[z,O]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([g.Nq.getCategories(),g.Nq.getSuppliers({status:"ACTIVE",limit:100})]);if(e.success&&e.data&&b(e.data),s.success){let e=s.data.items||s.data||[];w(Array.isArray(e)?e:[])}}catch(e){console.error("Failed to fetch data:",e)}})()},[]);let q=()=>{let e={};return S.name.trim()||(e.name="Name is required"),(!S.price||0>=parseFloat(S.price))&&(e.price="Valid price is required"),(!S.stock||0>parseInt(S.stock))&&(e.stock="Valid stock quantity is required"),S.categoryId||(e.categoryId="Category is required"),O(e),0===Object.keys(e).length},R=async s=>{if(s.preventDefault(),q()){t(!0);try{let s={name:S.name,description:S.description,price:parseFloat(S.price),compareAtPrice:S.compareAtPrice?parseFloat(S.compareAtPrice):void 0,stock:parseInt(S.stock),sku:S.sku||void 0,categoryId:S.categoryId,supplierId:S.supplierId||void 0,isActive:S.isActive,isFeatured:S.isFeatured,isPreorder:S.isPreorder,preorderNote:S.preorderNote||void 0,images:P.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary})),specifications:F.filter(e=>""!==e.value.trim()).map(e=>({key:e.key,value:e.value,group:e.group})),deliveryZones:Z.filter(e=>""!==e.zoneName.trim()).map(e=>({zoneName:e.zoneName,zoneType:e.zoneType,region:e.region,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee,available:e.available,notes:e.notes}))},t=await g.Nq.createProduct(s);t.success?e.push("/admin/products"):O({submit:t.error||"Failed to create product"})}catch(e){O({submit:"An error occurred. Please try again."})}finally{t(!1)}}};return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(j.P,{title:"Add Product"}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)(d.default,{href:"/admin/products",className:"mb-6 inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Back to Products"]}),(0,r.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[z.submit&&(0,r.jsx)("div",{className:"rounded-lg bg-destructive/10 p-4 text-sm text-destructive",children:z.submit}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Product Information"})}),(0,r.jsxs)(p.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(u._,{htmlFor:"name",children:["Name ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsx)(o.I,{id:"name",value:S.name,onChange:e=>_({...S,name:e.target.value}),placeholder:"Product name"}),z.name&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:z.name})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u._,{htmlFor:"description",children:"Description"}),(0,r.jsx)(m.g,{id:"description",value:S.description,onChange:e=>_({...S,description:e.target.value}),placeholder:"Product description",rows:5})]})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Media"})}),(0,r.jsx)(p.aY,{children:(0,r.jsx)(f.U,{images:P,onImagesChange:C,maxImages:6})})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Pricing"})}),(0,r.jsx)(p.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(u._,{htmlFor:"price",children:["Price (GHS) ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsx)(o.I,{id:"price",type:"number",step:"0.01",min:"0",value:S.price,onChange:e=>_({...S,price:e.target.value}),placeholder:"0.00"}),z.price&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:z.price})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u._,{htmlFor:"compareAtPrice",children:"Compare at Price"}),(0,r.jsx)(o.I,{id:"compareAtPrice",type:"number",step:"0.01",min:"0",value:S.compareAtPrice,onChange:e=>_({...S,compareAtPrice:e.target.value}),placeholder:"0.00"})]})]})})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Inventory"})}),(0,r.jsx)(p.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(u._,{htmlFor:"stock",children:["Stock ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsx)(o.I,{id:"stock",type:"number",min:"0",value:S.stock,onChange:e=>_({...S,stock:e.target.value}),placeholder:"0"}),z.stock&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:z.stock})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u._,{htmlFor:"sku",children:"SKU"}),(0,r.jsx)(o.I,{id:"sku",value:S.sku,onChange:e=>_({...S,sku:e.target.value}),placeholder:"SKU-001"})]})]})})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Specifications"})}),(0,r.jsx)(p.aY,{children:(0,r.jsx)(N.l,{specifications:F,onChange:I})})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Delivery Zones & Periods"})}),(0,r.jsx)(p.aY,{children:(0,r.jsx)(v.J,{deliveryZones:Z,onChange:A})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Organization"})}),(0,r.jsxs)(p.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(u._,{children:["Category ",(0,r.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,r.jsxs)(x.Ph,{value:S.categoryId,onValueChange:e=>_({...S,categoryId:e}),children:[(0,r.jsx)(x.i4,{children:(0,r.jsx)(x.ki,{placeholder:"Select category"})}),(0,r.jsx)(x.Bw,{children:y.map(e=>(0,r.jsx)(x.Ql,{value:e.id,children:e.name},e.id))})]}),z.categoryId&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:z.categoryId})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u._,{children:"Supplier"}),(0,r.jsxs)(x.Ph,{value:S.supplierId||"NONE",onValueChange:e=>_({...S,supplierId:"NONE"===e?"":e}),children:[(0,r.jsx)(x.i4,{children:(0,r.jsx)(x.ki,{placeholder:"Select supplier (optional)"})}),(0,r.jsxs)(x.Bw,{children:[(0,r.jsx)(x.Ql,{value:"NONE",children:"No supplier (Platform owned)"}),k.map(e=>(0,r.jsx)(x.Ql,{value:e.id,children:e.businessName||e.name},e.id))]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Assign this product to a supplier for multi-vendor support"})]})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Status"})}),(0,r.jsxs)(p.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u._,{htmlFor:"isActive",children:"Active"}),(0,r.jsx)(h.r,{id:"isActive",checked:S.isActive,onCheckedChange:e=>_({...S,isActive:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u._,{htmlFor:"isFeatured",children:"Featured"}),(0,r.jsx)(h.r,{id:"isFeatured",checked:S.isFeatured,onCheckedChange:e=>_({...S,isFeatured:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u._,{htmlFor:"isPreorder",children:"Pre-order"}),(0,r.jsx)(h.r,{id:"isPreorder",checked:S.isPreorder,onCheckedChange:e=>_({...S,isPreorder:e})})]}),S.isPreorder&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u._,{htmlFor:"preorderNote",children:"Pre-order Note"}),(0,r.jsx)(o.I,{id:"preorderNote",value:S.preorderNote,onChange:e=>_({...S,preorderNote:e.target.value}),placeholder:"e.g., Ships in 2-3 weeks"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Shown to customers when they order this product"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(d.default,{href:"/admin/products",children:(0,r.jsx)(n.z,{type:"button",variant:"outline",children:"Cancel"})}),(0,r.jsx)(n.z,{type:"submit",disabled:s,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Product"})]})]})]})]})}},2098:function(e,s,t){"use strict";t.d(s,{P:function(){return m}});var r=t(7821),a=t(9388),i=t(1149),c=t(3263),l=t(3572),d=t(9827),n=t(1502),o=t(2285),u=t(6665);function m(e){let{title:s}=e,{admin:t,logout:m}=(0,o.t)(),p=(0,u.useRouter)();return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:s&&(0,r.jsx)("h1",{className:"text-xl font-semibold",children:s})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative hidden md:block",children:[(0,r.jsx)(a.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(d.I,{placeholder:"Search...",className:"w-64 pl-10"})]}),(0,r.jsxs)(l.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,r.jsx)(i.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"absolute right-1 top-1 h-2 w-2 rounded-full bg-destructive"})]}),(0,r.jsxs)(n.h_,{children:[(0,r.jsx)(n.$F,{asChild:!0,children:(0,r.jsx)(l.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})})}),(0,r.jsxs)(n.AW,{align:"end",className:"w-56",children:[(0,r.jsx)(n.Ju,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:null==t?void 0:t.name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:null==t?void 0:t.email})]})}),(0,r.jsx)(n.VD,{}),(0,r.jsx)(n.Xi,{onClick:()=>p.push("/admin/settings"),children:"Settings"}),(0,r.jsx)(n.VD,{}),(0,r.jsx)(n.Xi,{onClick:()=>{m(),p.push("/admin/login")},className:"text-destructive",children:"Logout"})]})]})]})]})}},1502:function(e,s,t){"use strict";t.d(s,{$F:function(){return u},AW:function(){return m},Ju:function(){return x},VD:function(){return h},Xi:function(){return p},h_:function(){return o}});var r=t(7821),a=t(8078),i=t(6182),c=t(2547),l=t(3402),d=t(2872),n=t(5659);let o=i.fC,u=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,a.forwardRef((e,s)=>{let{className:t,inset:a,children:l,...d}=e;return(0,r.jsxs)(i.fF,{ref:s,className:(0,n.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",t),...d,children:[l,(0,r.jsx)(c.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=i.fF.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.tu,{ref:s,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}).displayName=i.tu.displayName;let m=a.forwardRef((e,s)=>{let{className:t,sideOffset:a=4,...c}=e;return(0,r.jsx)(i.Uv,{children:(0,r.jsx)(i.VY,{ref:s,sideOffset:a,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...c})})});m.displayName=i.VY.displayName;let p=a.forwardRef((e,s)=>{let{className:t,inset:a,...c}=e;return(0,r.jsx)(i.ck,{ref:s,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...c})});p.displayName=i.ck.displayName,a.forwardRef((e,s)=>{let{className:t,children:a,checked:c,...d}=e;return(0,r.jsxs)(i.oC,{ref:s,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:c,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})}),a]})}).displayName=i.oC.displayName,a.forwardRef((e,s)=>{let{className:t,children:a,...c}=e;return(0,r.jsxs)(i.Rk,{ref:s,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...c,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=i.Rk.displayName;let x=a.forwardRef((e,s)=>{let{className:t,inset:a,...c}=e;return(0,r.jsx)(i.__,{ref:s,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...c})});x.displayName=i.__.displayName;let h=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.Z0,{ref:s,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",t),...a})});h.displayName=i.Z0.displayName},1149:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2210).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},9388:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2210).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3263:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2210).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[8616,7886,346,9216,807,6637,3444,8088,3929,9632,7115,9069,1744],function(){return e(e.s=4337)}),_N_E=e.O()}]);
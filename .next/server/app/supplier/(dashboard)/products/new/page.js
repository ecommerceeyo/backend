(()=>{var e={};e.id=2837,e.ids=[2837],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},31420:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>c.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>o});var t=r(7),a=r(8533),i=r(29377),c=r.n(i),n=r(29799),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(s,l);let o=["",{children:["supplier",{children:["(dashboard)",{children:["products",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,82455)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,34692)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95667)),"/home/wilsonjunior/ecommerce-app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],d=["/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/new/page.tsx"],p="/supplier/(dashboard)/products/new/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/supplier/(dashboard)/products/new/page",pathname:"/supplier/products/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85611:(e,s,r)=>{Promise.resolve().then(r.bind(r,62116))},62116:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(54714),a=r(77580),i=r(57801),c=r(53278),n=r(40028),l=r(29872),o=r(46475),d=r(27114),p=r(31213),u=r(4686),m=r(83446),x=r(83679),h=r(51511),j=r(27267),g=r(54874),v=r(4214),y=r(13586),N=r(87773);function f(){let e=(0,i.useRouter)(),{supplierAdmin:s}=(0,N.A)(),r=s?.role==="OWNER"||s?.role==="MANAGER",[f,P]=(0,a.useState)(!1),[b,k]=(0,a.useState)([]),[w,A]=(0,a.useState)([]),[C,_]=(0,a.useState)([]),[I,F]=(0,a.useState)([]),[S,q]=(0,a.useState)({name:"",description:"",price:"",compareAtPrice:"",stock:"",sku:"",categoryId:"",isActive:!0,isPreorder:!1,preorderNote:""}),[Z,O]=(0,a.useState)({});if((0,a.useEffect)(()=>{(async()=>{try{let e=await y.R.getCategories();e.success&&e.data&&k(e.data)}catch(e){console.error("Failed to fetch categories:",e)}})()},[]),!r)return t.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Access Denied"}),t.jsx("p",{className:"mt-2 text-muted-foreground",children:"You don't have permission to create products. Contact your supplier owner or manager."}),t.jsx(l.default,{href:"/supplier/products",children:t.jsx(o.z,{variant:"outline",className:"mt-4",children:"Back to Products"})})]})});let z=()=>{let e={};return S.name.trim()||(e.name="Name is required"),(!S.price||0>=parseFloat(S.price))&&(e.price="Valid price is required"),(!S.stock||0>parseInt(S.stock))&&(e.stock="Valid stock quantity is required"),S.categoryId||(e.categoryId="Category is required"),O(e),0===Object.keys(e).length},Y=async s=>{if(s.preventDefault(),z()){P(!0);try{let s={name:S.name,description:S.description,price:parseFloat(S.price),compareAtPrice:S.compareAtPrice?parseFloat(S.compareAtPrice):void 0,stock:parseInt(S.stock),sku:S.sku||void 0,categoryId:S.categoryId,isActive:S.isActive,isPreorder:S.isPreorder,preorderNote:S.preorderNote||void 0,images:w.map(e=>({url:e.url,publicId:e.publicId,isPrimary:e.isPrimary})),specifications:C.filter(e=>""!==e.value.trim()).map(e=>({key:e.key,value:e.value,group:e.group})),deliveryZones:I.filter(e=>""!==e.zoneName.trim()).map(e=>({zoneName:e.zoneName,zoneType:e.zoneType,region:e.region,minDays:e.minDays,maxDays:e.maxDays,deliveryFee:e.deliveryFee,available:e.available,notes:e.notes}))},r=await y.R.createProduct(s);r.success?e.push("/supplier/products"):O({submit:r.error||"Failed to create product"})}catch(e){O({submit:e.message||"An error occurred. Please try again."})}finally{P(!1)}}};return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)(l.default,{href:"/supplier/products",className:"mb-6 inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Back to Products"]}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Add New Product"}),t.jsx("p",{className:"text-muted-foreground",children:"Create a new product for your store"})]}),(0,t.jsxs)("form",{onSubmit:Y,className:"space-y-6",children:[Z.submit&&t.jsx("div",{className:"rounded-lg bg-destructive/10 p-4 text-sm text-destructive",children:Z.submit}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Product Information"})}),(0,t.jsxs)(m.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"name",children:["Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(d.I,{id:"name",value:S.name,onChange:e=>q({...S,name:e.target.value}),placeholder:"Product name"}),Z.name&&t.jsx("p",{className:"text-sm text-destructive",children:Z.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"description",children:"Description"}),t.jsx(u.g,{id:"description",value:S.description,onChange:e=>q({...S,description:e.target.value}),placeholder:"Product description",rows:5})]})]})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Media"})}),t.jsx(m.aY,{children:t.jsx(j.U,{images:w,onImagesChange:A,maxImages:6})})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Pricing"})}),t.jsx(m.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"price",children:["Price (FCFA) ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(d.I,{id:"price",type:"number",step:"1",min:"0",value:S.price,onChange:e=>q({...S,price:e.target.value}),placeholder:"0"}),Z.price&&t.jsx("p",{className:"text-sm text-destructive",children:Z.price})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"compareAtPrice",children:"Compare at Price"}),t.jsx(d.I,{id:"compareAtPrice",type:"number",step:"1",min:"0",value:S.compareAtPrice,onChange:e=>q({...S,compareAtPrice:e.target.value}),placeholder:"0"})]})]})})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Inventory"})}),t.jsx(m.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{htmlFor:"stock",children:["Stock ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(d.I,{id:"stock",type:"number",min:"0",value:S.stock,onChange:e=>q({...S,stock:e.target.value}),placeholder:"0"}),Z.stock&&t.jsx("p",{className:"text-sm text-destructive",children:Z.stock})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"sku",children:"SKU"}),t.jsx(d.I,{id:"sku",value:S.sku,onChange:e=>q({...S,sku:e.target.value}),placeholder:"SKU-001"})]})]})})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Specifications"})}),t.jsx(m.aY,{children:t.jsx(g.l,{specifications:C,onChange:_})})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Delivery Zones & Periods"})}),t.jsx(m.aY,{children:t.jsx(v.J,{deliveryZones:I,onChange:F})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Organization"})}),t.jsx(m.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p._,{children:["Category ",t.jsx("span",{className:"text-destructive",children:"*"})]}),(0,t.jsxs)(x.Ph,{value:S.categoryId,onValueChange:e=>q({...S,categoryId:e}),children:[t.jsx(x.i4,{children:t.jsx(x.ki,{placeholder:"Select category"})}),t.jsx(x.Bw,{children:b.map(e=>t.jsx(x.Ql,{value:e.id,children:e.name},e.id))})]}),Z.categoryId&&t.jsx("p",{className:"text-sm text-destructive",children:Z.categoryId})]})})]}),(0,t.jsxs)(m.Zb,{children:[t.jsx(m.Ol,{children:t.jsx(m.ll,{children:"Status"})}),(0,t.jsxs)(m.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(p._,{htmlFor:"isActive",children:"Active"}),t.jsx(h.r,{id:"isActive",checked:S.isActive,onCheckedChange:e=>q({...S,isActive:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(p._,{htmlFor:"isPreorder",children:"Pre-order"}),t.jsx(h.r,{id:"isPreorder",checked:S.isPreorder,onCheckedChange:e=>q({...S,isPreorder:e})})]}),S.isPreorder&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"preorderNote",children:"Pre-order Note"}),t.jsx(d.I,{id:"preorderNote",value:S.preorderNote,onChange:e=>q({...S,preorderNote:e.target.value}),placeholder:"e.g., Ships in 2-3 weeks"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Shown to customers when they order this product"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[t.jsx(l.default,{href:"/supplier/products",children:t.jsx(o.z,{type:"button",variant:"outline",children:"Cancel"})}),t.jsx(o.z,{type:"submit",disabled:f,children:f?(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Product"})]})]})]})}},57469:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(20537).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},82455:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>c});let t=(0,r(71481).createProxy)(String.raw`/home/wilsonjunior/ecommerce-app/frontend/src/app/supplier/(dashboard)/products/new/page.tsx`),{__esModule:a,$$typeof:i}=t,c=t.default}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3499,6075,5303,9872,6710,6227,1824,9236,873,4774,2004],()=>r(31420));module.exports=t})();